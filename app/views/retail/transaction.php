<!-- Main Row =============================================== --><div class="container-fluid">	<div class="row-fluid">				<div class="well">			<h2 class="text-info"><a href="<? echo URL; ?>retail">Penjualan Eceran</a></h2>		</div>		<div class="well">			<div class="pull-right">				<button class="btn btn-success" onClick="showFormAddProduct()"><i class="icon-plus icon-white"></i> Tambahkan Item</button>			</div>			<br><br>			<table class="table" style="border:none">				<tbody>					<tr>						<td align="center">Tgl Transaksi : <strong><? echo date('d-m-Y', strtotime($this->detailSelling['selldate'])); ?></strong></td>						<td align="center">Nomor Transaksi :<strong> #<? echo $this->detailSelling['code']; ?></strong></td>						<td align="center"><span class="pull-right">Kasir : <strong><? echo $this->detailSelling['employeename']; ?></strong></span></td>					</tr>				</tbody>			</table>			<input type="hidden" id="selling" value="<? echo $this->detailSelling['id']; ?>">			<table class="table table-bordered table-hover">				<thead>					<tr>						<th width='10%'>Nomor</th>						<th width='50%'>Judul / Nama Produk</th>						<th>Harga Pokok</th>						<th>Jumlah</th>						<th>Diskon</th>						<th>Harga Jual</th>						<th>Sub Total</th>						<th width='15%'>Aksi</th>					</tr>				</thead>								<tbody id="tblDetails">					<? $count = 0; $totalprice = 0;					foreach ($this->listTransaction as $key => $value) { 						$count++; 						$totalprice += $value['total']*$value['sellprice']; ?>						<tr id="details-<? echo $value['id']; ?>">							<td><? echo $count; ?></td>							<td><? echo $value['title']; ?></td>							<td><? echo $value['total']; ?></td>							<td><? echo ($value['discount']/$value['price'])*100; ?></td>							<td><span class="pulll-right"><? echo $this->pecah($value['sellprice']); ?></span></td>							<td><span class="pull-right"><? echo $this->pecah($value['sellprice']*$value['total']); ?></span></td>							<td>								<div class="btn-group">									<a class="btn btn-info" href="javascript:void(0)"><i class="icon-edit icon-white"></i> Aksi</a>									<a class="btn btn-info dropdown-toggle" data-toggle="dropdown" href="javascript:void(0)"><span class="caret"></span></a>									<ul class="dropdown-menu">										<li>											<a href="javascript:void(0)" onClick="return deleteProduct(<? echo $value['id']; ?>)">											<i class="icon-remove"></i> Batalkan</a>										</li>									</ul>								</div>							</td>						</tr>					<? } ?>						<tr>							<td colspan="6"><span class="pull-right">Total Harga</span></td>							<td><span class="pull-right"><? echo $this->pecah($totalprice); ?></span></td>							<td></td>						</tr>				</tbody>			</table>			<div class="pull-right">				<button class="btn btn-inverse" onClick="showFormPayment()"><i class="icon-print icon-white"></i> Bayar</button>			</div>			<br><br>		</div>	</div></div><!-- Form Add Product [modal]===================================== --><div id="formAddProduct" class="modal hide fade" tabindex="-1" aria-hidden="true">	<div class="modal-header">		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>		<h3 id="myModalLabel">Tambah Item</h3>	</div>	<div class="modal-body">		<form class="form-horizontal">			<div class="control-group">				<label class="control-label" for="inputName">Judul / Nama</label>				<div class="controls">					<input id="inputProductID" type="hidden" value="0">					<input id="inputTitle" class="span3" type="text" data-provide="typeahead" placeholder="Cari Judul/Item">					<input id="inputPrice" type="hidden" value="0">				</div>			</div>				<div class="control-group">				<label class="control-label" for="inputTotal">Jumlah</label>				<div class="controls">					<input id="inputTotal" type="text" class="span1">				</div>			</div>			<div class="control-group">				<label class="control-label" for="inputPercent">Diskon</label>				<div class="controls">					<input id="inputPercent" type="text" class="span1" value="10">				</div>			</div>		</form>	</div>	<div class="modal-footer">		<button class="btn" data-dismiss="modal" aria-hidden="true">Batal</button>		<button class="btn btn-primary" onClick="addProduct()" data-dismiss="modal" aria-hidden="true">Simpan</button>	</div></div><!-- End of Form Add Product [modal] --><!-- Form Payment [modal]===================================== --><div id="formPayment" class="modal hide fade" tabindex="-1" aria-hidden="true">	<div class="modal-header">		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>		<h3 id="myModalLabel">Pembayaran</h3>	</div>	<div class="modal-body">		<form class="form-horizontal">			<div class="control-group">				<label class="control-label" for="inputPay">Bayar</label>				<div class="controls">					<input id="inputPay" class="span2" type="text" onkeyup="formatNumber(this)">				</div>			</div>		</form>	</div>	<div class="modal-footer">		<button class="btn" data-dismiss="modal" aria-hidden="true">Batal</button>		<button class="btn btn-primary" onClick="closing()" data-dismiss="modal" aria-hidden="true">Bayar</button>	</div></div><!-- End of Form Payment [modal] --><script type="text/javascript">	$(function(){		$('#inputTitle').typeahead({			source : function(query,process){				return $.post(site+'product/xlistproduct', {title : query}, function(response){					response = $.parseJSON(response);					var sourceArr = [];						for(var i = 0; i < response.length; i++)					{						sourceArr.push(response[i].id +"#"+ response[i].title +"#"+ response[i].publishername +"#" + response[i].sellprice);					}					return process(sourceArr);				})			},			highlighter : function(item){				var product = item.split('#');				var item = ''                		+ "<div class='typeahead_wrapper'>"                		+ "<img class='typeahead_photo' src='"+site+"assets/img/books.png'/>"                		+ "<div class='typeahead_labels'>"                		+ "<div class='typeahead_primary'>" + product[1] + "</div>"                		+ "<div class='typeahead_secondary'>" + product[2] + " # " + formatRupiah(product[3]) +"</div>"                 		+ "</div>"                 		+ "</div>";       		 	return item;			},			updater : function(item){				var product = item.split('#');				$('#inputProductID').val(product[0]);				$('#inputPrice').val(product[3]);				return product[1];			}		});	})	function showFormAddProduct()	{		$('#formAddProduct').modal('show');		$('#inputTitle').val('');		$('#inputProductID').val(0);		$('#inputPrice').val(0);		$('#inputTotal').val(0);		$('#inputPercent').val(10);	}	function addProduct()	{		var selling = $('#selling').val();		var product = $('#inputProductID').val();		var total = $('#inputTotal').val();		var price = parseInt($('#inputPrice').val());		var percent = parseInt($('#inputPercent').val());		var discount = (percent/100)*price;		var sellprice = price - discount;		if(selling != 0 && product != 0)		{			$.post(site+'retail/adddetails',				{selling : selling,				product :product,				total : total,				price : price,				discount : discount,				sellprice : sellprice},				function(){					load('retail/reloadpage/'+selling,'#tblDetails');			});		}	}		function deleteProduct(id)	{		if(confirm("Anda Yakin Akan Menghapus Item Ini?"))		{			$.post(site+'retail/deletedetails', {id : id}, function(){				$('#details-'+id).remove();			});		}	}	function showFormPayment()	{		$('#formPayment').modal('show');	}	function closing()	{		var selling = $('#selling').val();		var payment = parseInt(replaceAll($('#inputPay').val(),',',''));		window.location = site+"retail/closing/"+selling+"_"+payment;	}</script>