<?php		//Data	$code = $this->detailSelling['code'];	$selldate = date('d-m-y', strtotime($this->detailSelling['selldate']));	$employee = $this->detailSelling['employeename'];	$payment = $this->payment;	$times = date('H:i');		//Pilih Printer	$printer = printer_open("\\\\KASIR-PC\\EPSON TM-U220 ReceiptE4");	printer_set_option($printer, PRINTER_MODE, "RAW");	//Inisiasi	printer_start_doc($printer);	printer_start_page($printer);	//Layout	printer_draw_text($printer, "TOKO BUKU TOHA PUTRA",0,0);	printer_draw_text($printer, "Cabang MAKASSAR",0,20);	printer_draw_text($printer, "Jl. Sultan Alauddin 18-19",0,40);	printer_draw_text($printer, "Ruko Permata Sari",0,60);	printer_draw_text($printer, "Telp. 0411-868601",0,80);	printer_draw_text($printer, "=================================",0,100);	printer_draw_text($printer, "#".$code,0,120);	printer_draw_text($printer, $selldate,200,120);	printer_draw_text($printer, $times,325,120);	printer_draw_text($printer, "---------------------------------",0,140);	printer_draw_text($printer, "Judul", 0, 160);	printer_draw_text($printer, "Dis", 175, 160);	printer_draw_text($printer, "Qty", 215, 160);	printer_draw_text($printer, "Sub Total", 260, 160);	printer_draw_text($printer, "---------------------------------",0,180);	$y = 180;	$totalharga = 0;	foreach ($this->listTransaction as $key => $value) {		$y += 20;		$totalharga += ($value['sellprice']*$value['total']);		printer_draw_text($printer, preg_replace('/\s+?(\S+)?$/', '', substr($value['title'], 0, 14)), 0, $y);		printer_draw_text($printer, (($value['discount']/$value['price'])*100).'%', 175, $y);		printer_draw_text($printer, $value['total'], 218, $y);		printer_draw_text($printer, $this->pecah($value['sellprice']*$value['total']), 260, $y);		$y += 20;		printer_draw_text($printer, ':'.$this->pecah($value['price']), 10, $y);	}	$y += 20;	printer_draw_text($printer, "---------------------------------",0,$y);	$y += 20;	printer_draw_text($printer, "Total:", 150, $y);	printer_draw_text($printer, $this->pecah($totalharga), 250, $y);	$y += 20;	printer_draw_text($printer, "Bayar:", 150, $y);	printer_draw_text($printer, $this->pecah($payment), 250, $y);	$y += 20;	printer_draw_text($printer, "Kembali:", 150, $y);	printer_draw_text($printer, $this->pecah($payment-$totalharga), 250, $y);	$y += 20;	printer_draw_text($printer, "---------------------------------",0,$y);	$y += 40;	printer_draw_text($printer, "Kasir: ".$employee, 0, $y);	$y += 40;	printer_draw_text($printer, "TERIMA KASIH", 125, $y);											//Finishing Printing	printer_end_page($printer);	printer_end_doc($printer);	printer_close($printer);?><!-- Main Row =============================================== --><div class="container-fluid">	<div class="row-fluid">				<div class="well">			<h3 class="text-info">Cetak Struk</h3>		</div>		<br>		<div id="bodyPrint" class="well span8">			<center>				<p>Total Harga : <strong><? echo $this->pecah($totalharga); ?></strong></p>				<p>Jumlah Bayar : <strong><? echo $this->pecah($payment); ?></strong></p>				<p>Kembali : <strong><? echo $this->pecah($payment-$totalharga); ?></strong></p>				<h4 class="text-warning">Klik Kembali untuk Kembali Ke Halaman Penjualan</h4>				<button class="btn btn-mini btn-info" onClick="backtoRetail()">Kembali</button>			</center>		</div>	</div></div><script type="text/javascript">	function backtoRetail()	{		window.location = site+"retail";	}</script>