<!-- Main Row =============================================== --><div class="container-fluid">	<div class="row-fluid">				<div class="well">			<h1 class="text-info">Halaman Penelusuran</h1>		</div>		<div class="well">			<select name="filterSearching">				<option value="title">Judul Buku</option>				<option value="writer">Penulis</option>				<option value="publisher">Penerbit</option>			</select>			<script type="text/javascript">				$('select[name=filterSearching]').val('<? echo $this->filter; ?>');			</script>			<input type="text" id="inputParam" class="span5" placeholder="Ketikkan Disini" value="<? echo $this->param; ?>">			<br><br>			<table class="table table-bordered table-hover">				<thead>					<tr>						<th width='10%'>ID Produk</th>						<th width='40%'>Judul / Nama</th>						<th>Penulis</th>						<th>Penerbit</th>						<th>Klasifikasi</th>						<th>Harga Jual</th>						<th>Stok</th>						<th width='15%'>Aksi</th>					</tr>				</thead>								<tbody id="tblproduct">					<? if(!empty($this->listProduct)) : foreach ($this->listProduct as $key => $value) { ?>						<tr>							<td><? echo $value['code']; ?></td>							<td><a href="javascript:void(0)" onClick="load('product/details/+<? echo $value['id']; ?>', '#content');"><? echo $value['title']; ?></a></td>							<td><? echo $value['writer']; ?></td>							<td><? echo $value['publishername']; ?></td>							<td><? echo $value['classname']; ?></td>							<td><? echo $this->pecah($value['sellprice']); ?></td>							<td><? echo $value['stock']; ?></td>							<td>								<input type="hidden" name="class-<? echo $value['id']; ?>" value="<? echo $value['class']; ?>">								<input type="hidden" name="publisher-<? echo $value['id']; ?>" value="<? echo $value['publisher']; ?>">								<input type="hidden" name="supplier-<? echo $value['id']; ?>" value="<? echo $value['supplier']; ?>">								<input type="hidden" name="code-<? echo $value['id']; ?>" value="<? echo $value['code']; ?>">								<input type="hidden" name="title-<? echo $value['id']; ?>" value="<? echo $value['title']; ?>">								<input type="hidden" name="writer-<? echo $value['id']; ?>" value="<? echo $value['writer']; ?>">								<input type="hidden" name="price-<? echo $value['id']; ?>" value="<? echo $value['price']; ?>">									<input type="hidden" name="sellprice-<? echo $value['id']; ?>" value="<? echo $value['sellprice']; ?>">								<input type="hidden" name="stock-<? echo $value['id']; ?>" value="<? echo $value['stock']; ?>">								<input type="hidden" name="lastopname-<? echo $value['id']; ?>" value="<? echo $value['lastopname']; ?>">								<input type="hidden" name="consignment-<? echo $value['id']; ?>" value="<? echo $value['consignment']; ?>">								<div class="btn-group">									<a class="btn btn-info" href="javascript:void(0)"><i class="icon-edit icon-white"></i> Aksi</a>									<a class="btn btn-info dropdown-toggle" data-toggle="dropdown" href="javascript:void(0)"><span class="caret"></span></a>									<ul class="dropdown-menu">										<li>											<a href="javascript:void(0)" onClick="return selectThis(<? echo $value['id']; ?>)">											<i class="icon-pencil"></i> Lihat Detail</a>										</li>										<li>											<a href="javascript:void(0)" onClick="return showFormUpdateDetails(<? echo $value['id']; ?>)">											<i class="icon-pencil"></i> Update Detail</a>										</li>										<li>											<a href="javascript:void(0)" onClick="return showFormOpname(<? echo $value['id']; ?>)">											<i class="icon-pencil"></i> Stock Opname</a>										</li>										<li>											<a href="javascript:void(0)" onClick="return showFormUpdateClass(<? echo $value['id']; ?>)">											<i class="icon-pencil"></i> Ubah Klasifikasi</a>										</li>										<li>											<a href="javascript:void(0)" onClick="return showFormUpdatePublisher(<? echo $value['id']; ?>)">											<i class="icon-pencil"></i> Ubah Penerbit</a>										</li>										<li>											<a href="javascript:void(0)" onClick="return showFormUpdateConsignment(<? echo $value['id']; ?>)">											<i class="icon-pencil"></i> Set Konsinyasi</a>										</li>										<li>											<a href="javascript:void(0)" onClick="return deleteProduct(<? echo $value['id']; ?>)">											<i class="icon-remove"></i> Hapus</a>										</li>									</ul>								</div>							</td>						</tr>					<? } endif; ?>				</tbody>			</table>		</div>	</div></div><!-- Form Update Details [modal]===================================== --><div id="formUpdateDetails" class="modal hide fade" tabindex="-1" aria-hidden="true">	<div class="modal-header">		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>		<h3 id="myModalLabel">Update Details</h3>	</div>	<div class="modal-body">		<form class="form-horizontal">			<div class="control-group">				<label class="control-label" for="inputCode">ID/Kode Produk</label>				<div class="controls">					<input type="hidden" name="id-details">					<input type="text" name="inputCode" disabled>				</div>			</div>			<div class="control-group">				<label class="control-label" for="inputTitle">Judul / Nama</label>				<div class="controls">					<textarea name="inputTitle" class="span3"></textarea>				</div>			</div>			<div class="control-group">				<label class="control-label" for="inputWriter">Penulis</label>				<div class="controls">					<textarea name="inputWriter" class="span3"></textarea>				</div>			</div>			<div class="control-group">				<label class="control-label" for="inputPrice">Harga Pokok</label>				<div class="controls">					<input type="text" name="inputPrice" onKeyUp="formatNumber(this)">				</div>			</div>			<div class="control-group">				<label class="control-label" for="inputSellPrice">Harga Jual</label>				<div class="controls">					<input type="text" name="inputSellPrice" onKeyUp="formatNumber(this)">				</div>			</div>		</form>	</div>	<div class="modal-footer">		<button class="btn" data-dismiss="modal" aria-hidden="true">Batal</button>		<button class="btn btn-primary" onClick="updateDetails()" data-dismiss="modal" aria-hidden="true">Simpan Perubahan</button>	</div></div><!-- End of Form Update Details [modal] --><!-- Form Opname [modal]===================================== --><div id="formOpname" class="modal hide fade" tabindex="-1" aria-hidden="true">	<div class="modal-header">		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>		<h3 id="myModalLabel">Opname</h3>	</div>	<div class="modal-body">		<form class="form-horizontal">			<div class="control-group">				<label class="control-label" for="inputstock">Stock</label>				<div class="controls">					<input type="hidden" name="id-opname">					<input type="text" name="inputstock">				</div>			</div>		</form>	</div>	<div class="modal-footer">		<button class="btn" data-dismiss="modal" aria-hidden="true">Batal</button>		<button class="btn btn-primary" onClick="opname()" data-dismiss="modal" aria-hidden="true">Simpan</button>	</div></div><!-- End of Form Opname [modal] --><!-- Form Update Class [modal]===================================== --><div id="formUpdateClass" class="modal hide fade" tabindex="-1" aria-hidden="true">	<div class="modal-header">		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>		<h3 id="myModalLabel">Klasifikasi</h3>	</div>	<div class="modal-body">		<form class="form-horizontal">			<div class="control-group">				<label class="control-label" for="inputClass">Klasifikasi</label>				<div class="controls">					<input type="hidden" name="id-class">					<select name="inputClass">						<? foreach ($this->listClass as $key => $value) { ?>							<option value="<? echo $value['id']; ?>"><? echo $value['name']; ?></option>						<? } ?>					</select>				</div>			</div>		</form>	</div>	<div class="modal-footer">		<button class="btn" data-dismiss="modal" aria-hidden="true">Batal</button>		<button class="btn btn-primary" onClick="updateClass()" data-dismiss="modal" aria-hidden="true">Simpan</button>	</div></div><!-- End of Form Update Class [modal] --><!-- Form Update Publisher [modal]===================================== --><div id="formUpdatePublisher" class="modal hide fade" tabindex="-1" aria-hidden="true">	<div class="modal-header">		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>		<h3 id="myModalLabel">Penerbit</h3>	</div>	<div class="modal-body">		<form class="form-horizontal">			<div class="control-group">				<label class="control-label" for="inputPublisher">Penerbit</label>				<div class="controls">					<input type="hidden" name="id-publisher">					<input type="hidden" id="inputPublisherID">					<input type="text" id="inputPublisherName" class="span3" data-provide="typeahead" placeholder="Cari Penerbit">				</div>			</div>		</form>	</div>	<div class="modal-footer">		<button class="btn" data-dismiss="modal" aria-hidden="true">Batal</button>		<button class="btn btn-primary" onClick="updatePublisher()" data-dismiss="modal" aria-hidden="true">Simpan</button>	</div></div><!-- End of Form Update Publisher [modal] --><!-- Form Update Supplier [modal]===================================== --><div id="formUpdateConsignment" class="modal hide fade" tabindex="-1" aria-hidden="true">	<div class="modal-header">		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>		<h3 id="myModalLabel">Update Supplier</h3>	</div>	<div class="modal-body">		<form class="form-horizontal">			<div class="control-group">				<label class="control-label" for="inputConsignment">Jenis Supplier</label>				<div class="controls">					<input type="hidden" name="id-supplier">					<select name="inputConsignment" class="span2">						<option value="0">Milik Sendiri</option>						<option value="1">Konsinyasi</option>					</select>				</div>			</div>			<div class="control-group">				<label class="control-label" for="inputSupplier">Supplier</label>				<div class="controls">					<input type="hidden" id="inputSupplierID">					<input type="text" id="inputSupplierName" class="span3" data-provide="typeahead" placeholder="Cari Supplier">				</div>			</div>		</form>	</div>	<div class="modal-footer">		<button class="btn" data-dismiss="modal" aria-hidden="true">Batal</button>		<button class="btn btn-primary" onClick="updateConsignment()" data-dismiss="modal" aria-hidden="true">Simpan</button>	</div></div><!-- End of Form Update Supplier [modal] --><script type="text/javascript">	$(function(){		$('#inputParam').bind('keypress', function(e) {			if ((e.keyCode || e.which) == 13)			{				var param = replaceAll($('#inputParam').val(),' ','space');				var filter = $('select[name=filterSearching]').val();								if(filter == 'title')				{					window.location = site+"search/bytitle/"+filter+"_"+param;				}				else if(filter == 'writer')				{					window.location = site+"search/bywriter/"+filter+"_"+param;				}				else if(filter == 'publisher')				{					window.location = site+"search/bypublisher/"+filter+"_"+param;				}			}		});		$('#inputPublisherName').typeahead({			source : function(query,process){				return $.post(site+'product/xlistpublisher', {param : query}, function(response){					response = $.parseJSON(response);					var sourceArr = [];						for(var i = 0; i < response.length; i++)					{						sourceArr.push(response[i].id +"#"+ response[i].name);					}					return process(sourceArr);				})			},			highlighter : function(item){				var publisher = item.split('#');				var item = ''	            		+ "<div class='typeahead_wrapper'>"	            		+ "<div class='typeahead_labels'>"	            		+ "<div class='typeahead_primary'>" + publisher[1] + "</div>"	             		+ "</div>"	             		+ "</div>";	   		 	return item;			},			updater : function(item){				var publisher = item.split('#');				$('#inputPublisherID').val(publisher[0]);				return publisher[1];			}		});		$('#inputSupplierName').typeahead({			source : function(query,process){				return $.post(site+'product/xlistsupplier', {param : query}, function(response){					response = $.parseJSON(response);					var sourceArr = [];						for(var i = 0; i < response.length; i++)					{						sourceArr.push(response[i].id +"#"+ response[i].name);					}					return process(sourceArr);				})			},			highlighter : function(item){				var supplier = item.split('#');				var item = ''	            		+ "<div class='typeahead_wrapper'>"	            		+ "<img class='typeahead_photo' src='"+site+"assets/img/suppliers_icon.gif'/>"	            		+ "<div class='typeahead_labels'>"	            		+ "<div class='typeahead_primary'>" + supplier[1] + "</div>"	             		+ "</div>"	             		+ "</div>";	   		 	return item;			},			updater : function(item){				var supplier = item.split('#');				$('#inputSupplierID').val(supplier[0]);				return supplier[1];							}		});		/*$('#inputParam').typeahead({			source : function(query,process){				return $.post(site+'product/xlistproduct', {title : query}, function(response){					response = $.parseJSON(response);					var sourceArr = [];						for(var i = 0; i < response.length; i++)					{						sourceArr.push(response[i].id +"#"+ response[i].title +"#"+ response[i].publishername +"#" + response[i].sellprice);					}					return process(sourceArr);				})			},			highlighter : function(item){				var product = item.split('#');				var item = ''                		+ "<div class='typeahead_wrapper'>"                		+ "<img class='typeahead_photo' src='"+site+"assets/img/books.png'/>"                		+ "<div class='typeahead_labels'>"                		+ "<div class='typeahead_primary'>" + product[1] + "</div>"                		+ "<div class='typeahead_secondary'>" + product[2] + " # " + formatRupiah(product[3]) +"</div>"                 		+ "</div>"                 		+ "</div>";       		 	return item;			},			updater : function(item){				var product = item.split('#');				load('product/details/'+product[0],'#content');			}		});*/	})	function selectThis(id)	{		load('product/details/'+id,'#content');	}	function deleteProduct(id)	{		if(confirm("Anda Yakin Akan Menghapus Data Ini?"))		{			$.post(site+'product/delete', {id : id}, function(){				$('#product-'+id).remove();			});		}	}	//Operational Function	function showFormUpdateClass(id)	{		$('#formUpdateClass').modal('show');		$('select[name=inputClass]').val($('input[name=class-'+id+']').val());		$('input[name=id-class]').val(id);	}	function showFormUpdateDetails(id)	{		$('#formUpdateDetails').modal('show');		$('input[name=inputCode]').val($('input[name=code-'+id+']').val());		$('textarea[name=inputTitle]').val($('input[name=title-'+id+']').val());		$('textarea[name=inputWriter]').val($('input[name=writer-'+id+']').val());		$('input[name=inputPrice]').val($('input[name=price-'+id+']').val());		$('input[name=inputSellPrice]').val($('input[name=sellprice-'+id+']').val());		$('input[name=id-details]').val(id);	}	function showFormOpname(id)	{		$('#formOpname').modal('show');		$('input[name=inputstock]').val($('input[name=stock-'+id+']').val());		$('input[name=inputstockOH]').val($('input[name=stockoh-'+id+']').val());		$('input[name=id-opname]').val(id);	}	function showFormUpdatePublisher(id)	{		$('#formUpdatePublisher').modal('show');		$('select[name=inputPublisher]').val($('input[name=publisher-'+id+']').val());		$('input[name=id-publisher]').val(id);	}	function showFormUpdateConsignment(id)	{		$('#formUpdateConsignment').modal('show');		$('#inputSupplierID').val($('input[name=supplier-'+id+']').val());		$('#inputSupplierName').val($('input[name=suppliername-'+id+']').val());		$('select[name=inputConsignment]').val($('input[name=consignment-'+id+']').val());		$('input[name=id-supplier]').val(id);	}	function updateDetails()	{		var id = $('input[name=id-details]').val();		var title = $('textarea[name=inputTitle]').val();		var writer = $('textarea[name=inputWriter]').val();		var price = parseInt(replaceAll($('input[name=inputPrice]').val(),',',''));		var sellprice = parseInt(replaceAll($('input[name=inputSellPrice]').val(),',',''));		$.post(site+'/product/update',			{ id : id,			title : title,			writer : writer,			price : price,			sellprice : sellprice}, 			function(){				location.reload();			});	}	function opname()	{		var id = $('input[name=id-opname]').val();		var stock = $('input[name=inputstock]').val();		$.post(site+'/product/opname',			{id : id,			stock : stock}, 			function(){				location.reload();			});	}	function updateClass(id)	{		var id = $('input[name=id-class]').val();		var classes = $('select[name=inputClass]').val();		$.post(site+'/product/updateclass',			{id : id,			classes : classes}, 			function(){				location.reload();			});	}	function updatePublisher(id)	{		var id = $('input[name=id-publisher]').val();		var publisher = $('#inputPublisherID').val();		$.post(site+'product/updatepublisher',			{id : id,			publisher : publisher}, 			function(){				location.reload();			});	}	function updateConsignment(id)	{		var id = $('input[name=id-supplier]').val();		var supplier = $('#inputSupplierID').val();		var consignment = $('select[name=inputConsignment]').val();		$.post(site+'/product/updateconsignment',			{id : id,			supplier : supplier,			consignment : consignment}, 			function(){				location.reload();			});	}</script>